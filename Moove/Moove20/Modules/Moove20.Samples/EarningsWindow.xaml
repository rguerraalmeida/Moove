<Window x:Class="Moove20.Samples.EarningsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="EarningsWindow" Height="300" Width="300" WindowStartupLocation="CenterScreen" WindowState="Maximized">
    <Grid>
        <Grid >
            <ItemsControl Height="48" VerticalAlignment="Top" >
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel IsItemsHost="True" Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Label Content="2013" Margin="8,8,8,0" FontFamily="OSP-DIN" FontSize="18.667" Height="36" VerticalAlignment="Top" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Padding="0"/>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <ListBox x:Name="dateList"  VerticalAlignment="Top" Margin="0,48,0,0" 
                     ItemsSource="{Binding Dates}" 
                     ScrollViewer.VerticalScrollBarVisibility="Disabled">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel IsItemsHost="True" Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="50" />
                                <RowDefinition Height="50" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="36" />
                            </Grid.ColumnDefinitions>
                            <Border Grid.ColumnSpan="2" Grid.RowSpan="2" BorderThickness="8" BorderBrush="Cyan">
                            </Border>


                            <StackPanel Orientation="Vertical" Grid.ColumnSpan="2" Grid.RowSpan="2">
                                <Label Content="{Binding EarningsDate, StringFormat={}{0:d MMM}}" FontFamily="OSP-DIN" FontSize="18.667" Height="36" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Width="Auto" Grid.ColumnSpan="2"/>
                                <TextBlock Text="{Binding EarningsDate, StringFormat={}{0:d MMM}}" FontFamily="OSP-DIN" FontSize="18.667" Height="36" Width="Auto" Grid.ColumnSpan="2"/>
                            </StackPanel>
                            <Border Grid.Column="0" Width="36" CornerRadius="25,25,25,25" Grid.ColumnSpan="2" Margin="82,-20.667,18,20.667">
                                <Border.Background>
                                    <SolidColorBrush Color="#FFDEDEDE"/>
                                </Border.Background>
                                <Label Content="{Binding CompanyCount}" FontFamily="OSP-DIN" FontSize="18.667" Height="36" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Width="36" />
                            </Border>

                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ListBox>
            <ListBox Margin="0,87,0,0" HorizontalAlignment="Left" Width="127" 
                     ItemsSource="{Binding ElementName=dateList, Path=SelectedItem.Earnings}"
                     SelectedItem="{Binding SelectedCompanyDateResult, Mode=TwoWay}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Label Content="{Binding Ticker}" Margin="8,8,8,0" FontFamily="OSP-DIN" FontSize="18.667" Height="36" VerticalAlignment="Top" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"/>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel IsItemsHost="True" Orientation="Vertical"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ListBox>
            <ListBox Margin="127,87,0,0" ItemsSource="{Binding News}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical" >
                            <StackPanel Orientation="Horizontal">
                                <Label Content="{Binding Title}" Margin="8,8,8,0" FontFamily="OSP-DIN" FontSize="18.667" Height="36" VerticalAlignment="Top" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"/>
                                <Label Content="{Binding PublishDate}" Margin="8,8,8,0" FontFamily="OSP-DIN" FontSize="18.667" Height="36" VerticalAlignment="Top" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"/>
                            </StackPanel>
                            <Label Content="{Binding Description}" Margin="8,8,8,0" FontFamily="OSP-DIN" FontSize="18.667" Height="36" VerticalAlignment="Top" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"/>
                            <!--<Label Content="{Binding Link}" Margin="8,8,8,0" FontFamily="OSP-DIN" FontSize="18.667" Height="36" VerticalAlignment="Top" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"/>-->
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel IsItemsHost="True" Orientation="Vertical"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ListBox>
        </Grid>
    </Grid>
</Window>
